<!DOCTYPE html> 
<html> 
    <head> 
        <meta charset="utf-8"> 
        <meta name="viewport" content="width=device-width, maximum-scale=1.0" />

        <title>TJ G's A4</title> 

        <link href="style.css" media="screen" rel="stylesheet" type="text/css" />

    </head> 
    <body> 

        <div class="header">
            <h1>TJ Gascho's Assignment 4!</h1>
            <p>
            <img src="a4_circuit.gif" width=400></a>
            <br/>        
            Image 1. The final product of assignment four, a circuit with an LED strip and an IR sensor and remote.
            </p>
            <p>
            Here is all the documentation for assignment 4!
            </p>
        </div>
        <h2> Schematic </h2>
        <img src="a4_schematic.JPG" width=400></a>
        <br/> 
        Image 2. A schematic of the Transistor x IR sensor circuit. 
        <br/>        
        The blue LEDs is using a 330 ohm resistor. Given a 3.2 voltage drop, and V=IR, 5-3.2=x*330, we have a current of 12mA,which is safe for the LED.
        The photoresistor works alongside a 10k ohm resistor. This allows there to be a small amount of current without preventing data from being read by our A0 pin.
        The voltage recorded by the analog read at the voltage divide (the wire going to pin A0), is dependent upon the photoresistor's light input.
        <pre>        
        That voltage can be calculated by finding the current across both resistors...
        V = I*(R1+R2)
        5 = I*(R1+10,000)
        5/(R1+10,000) = I
        and then calculating the voltage remaining after R1 and before R2...
        Vout = Itotal*R2
        Vout = (5*10,000)/(R1+10,000)
        Vout = 50,000/(R1+10,000)
        where R1 is dependent upon the amount of light it is receiving. 
        </pre>
        This value of voltage is important for our code, as we will map it to the brightness of our LED.
        <h2> Circuit </h2>
        <img src="a4_circuit.JPG" width=400></a>
        <br/> 
        Image 3. The final circuit, with an LED strip attached to a 12v power supply, an N-Fet transistor, and an IR receiver.
        <h2> Code </h2>
        <pre>// includes the library for our infrared remote in this sketch
#include <IRremote.h>

// sets the IR receiver pin to 6
IRrecv irrecv(6);
// establishes an object to later decode receiever information
decode_results results;
// establishes a global variable for manipulating LED brightness
int brightness;

// the setup function runs once when you press reset or power the board
void setup() {
  // sets the data rate to 9600 bits per second
  Serial.begin(9600);
  // enables the IR receiver
  irrecv.enableIRIn();
  // blinks the Arduino board's LED every time input is received
  irrecv.blink13(true);
  // initializes pin 9 as an output.
  pinMode(9, OUTPUT);
  // initializes the brightness as 0 out of 255
  brightness = 0;
}

// the loop function runs over and over again forever
void loop() {
  // if input is received by our IR sensor, runs the following code and saves the value 
  if (irrecv.decode(&results)) {
    // if the input is from pressing the up button
    if (results.value == 16748655) {
      // if the brightness can still be increased
      if (brightness <= 240) {
        // increases the brightness by 15 (out of 255)
        brightness += 15;
      }
      // otherwise, if the input is from pressing the down button
    } else if (results.value == 16769055) {
      // if the brightness can still be decreased
      if (brightness >= 15) {
        // decreases the brightness by 15 (out of 255)
        brightness -= 15;
      }
    }
    // sets the LED strip to the current brightness value
    analogWrite(9, brightness);
    // resets the receiver and allows it to listen for input again
    irrecv.resume();
  }
}
</pre>
        <h2> Circuit Operation </h2>   
        <img src="a4_circuit.gif" width=400></a>
        <br/> 
        Image 4. The circuit operating such that the led strip increases in brightness when the up button is pressed and decreases when the down button is pressed.
    </body>
</html>
